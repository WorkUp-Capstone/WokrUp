<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="partials/head :: head">
    <title>WorkUp Projects</title>
</head>
<body>
<nav th:replace="partials/navbar :: navbar"></nav>
<div class="home-search m-1">
<form th:action="@{/home/search}" method="get">
    <div class="search">
    <label>
        <input placeholder="find name or languages" type="text" name="keyword" autocomplete="off" autocapitalize="off" width="14em">
    </label>

    <button type=submit class="btn btn-outline-secondary">Search</button>
    </div>
</form>
</div>

<div th:switch="${userRole}">
    <div class="home-h1">
        <h1>Our Developers</h1>
    </div>
    <div th:case="'owner'">
       <div class="home-boundary">
        <th:block th:each="profile : ${devProfiles} ">
            <div class="home-card">
            <article class="home-article">
                <section class="home-img-section">
<div class="profile-photo">
                <div th:if="${profile.profile_image_url == null}">
                    <div>
                        <img src="/img/default-person-icon.png" alt="default pic" width="100" height="100">
                    </div>
                </div>

                <div>
                    <img th:src="${profile.profile_image_url}">
                </div>
</div>
                </section>
                <hr>
                <section class="home-text-section col">
                    <h3 class="row-home" th:text="${profile.user.getFullName()}"></h3>
                    <hr>
                </section>
                <section class="home-text-section col">
                    <h5 class="row-home">About</h5>
                    <p class="row-home" th:text="${profile.about}"></p>
                    <hr>
                </section>
                <section class="home-text-section col">
                    <h5 class="row-home">Portfolio</h5>
                    <p class="row-home" th:text="${profile.portfolio_link}"></p>
                    <hr>
                </section>
                <section class="home-text-section col">
                    <h5 class="row-home">Resume</h5>
                    <p class="row-home" th:text="${profile.resume_link}"></p>
                    <hr>
                </section>
                <section class="home-text-section col">
                    <h5 class="row-home">Preferred Languages & Frameworks</h5>
                    <th:block th:each="category : ${profile.categories}">
                        <p class="row-home" th:text="${category.name}"></p>
                    </th:block>
                </section>
                <form th:action="@{/home/contact}" method="post">
                    <input type="hidden" th:name="profileID" th:value="${profile.getUser().getId()}">

                    <button type="submit" class="btn btn-outline-*" id="claim-project">Reach Out!</button>
                </form>
            </article>
            </div>
        </th:block>
       </div>
    </div>


    <div class="project-card" th:case="'developer'">
        <h4>Open Projects</h4>

        <th:block th:each="project : ${openProjects}">
            <div class="card w-50 m-2 p-3 col">
                <div class="row profile-view">
                    <h3 class="col" th:text="${project.title}"></h3>
                </div>

                <div class="row profile-view">
                    <h5 class="col">Description</h5>
                    <p class="col" th:text="${project.description}"></p>
                </div>

                <div class="row profile-view">
                    <h5 class="col">Preferred Languages & Frameworks</h5>
                    <th:block th:each="category : ${project.categories}">
                        <div class="col" th:text="${category.name}"></div>
                    </th:block>
                </div>
                <div class="row profile-view">
                    <label class="col"><strong>Owner </strong></label>
                    <p class="col" th:text="${project.user.getFullName()}"></p>
                </div>
                <div class="row profile-view">
                    <h5 class="col">Creation On</h5>
                    <p class="col" th:text="${project.creationDate}"></p>
                </div>

                <div class="row profile-view">

                    <input type="hidden" th:name="projectIma" th:value="${project.getImages()}">
                    <a th:href="@{/home/project/{id}/images(id=${project.getId()})}"><span><h5 class="col">View Files</h5></span></a>
                </div>

<!--                <form th:action="@{/home/claimed-project}" method="post">-->
<!--                    <input type="hidden" th:name="projectID" th:value="${project.getId()}">-->
<!--                    <button type="submit" class="btn-outline-success">Claim Project</button>-->
<!--                </form>-->
                <form th:action="@{/home/view-prospect}" method="post">
                    <input type="hidden" th:name="ownerID" th:value="${project.getUser().getId()}">
                    <button type="submit" class="btn-outline-success">View Owner</button>
                </form>
                <div>
                    <form th:action="@{/home/claimed-project}" method="post">
                        <input type="hidden" th:name="projectID" th:value="${project.getId()}">
                        <button type="submit" class="btn-outline-success">Claim Project</button>
                    </form>
                </div>
            </div>
        </th:block>
    </div>
</div>
<footer th:replace="partials/footer :: #sticky-footer"></footer>
</body>
</html>
